---
layout : single
title : "STAGE3. Cookie & Session (3)"
categories: Security
tag: [dreamhack, webhacking]
sidebar:
    nav: "docs"
---
# 드림핵 웹 Same Origin Policy
쿠키에는 인증 상태를 나타내는 민감한 정보가 보관되며, 이는 브라우저 내부에 저장된다. 혹, 악의적인 펭니지가 이용자의 SNS 웹 서비스로 요청을 보낸다면 어떻게 될까 ? 브라우저는 요청을 보낼 때 헤더에 해당 웹 서비스의 쿠키를 포함시키므로, 해당 페이지는 이용자의 SNS 응답을 받고, 글을 올리고, 삭제하는 등의 작업이 가능할 것이다.<br><br>
## SOP (Same Origin Policy : 동일 출처 정책)

브라우저는 사이트에 직접적으로 접속할 때뿐만 아니라, 웹 리소스를 통해 간접적으로 타 사이트에 접근할 때에도 쿠키를 함께 전송한다. 이 때문에 위와 같은 악의적인 사용이 일어날 수 있는데, 이 때 보안 위협을 막기 위해 사용되는 것이 브라우저의 보안 매커니즘인 SOP 이다.클라이언트 사이드 웹 보안에서 중요한 위치를 지니며, 사실상 클라이언트 사이드 공격은 SOP 를 우회하기 위한 것이라고 말할 수 있다.

### SOP의 Origin 구별 방법
Origin은 Protocol, Scheme, Port, Host 네 가지로 구성된다. 이 때, 모든 구성요소가 일치해야 동일한 origin으로 판단되며, SOP는 Same Origin일 때만 정보를 읽을 수 있게 해준다.
<br><Br>

**https://dramhack.io 에서 콘솔을 통해 실습한 결과*
<img src = "/images/webbackground/6.png">
<br><br>

```javascript
console.log(crossNewWindow.location.href);
```
위 코드의 오류문에서 외부 출처에서 불러온 데이터는 Origin 오류가 발생하여 읽을 수 없는 것을 확인할 수 있다.

```javascript
crossNewWindow = window.open('https://theori.io');
```
그러나 이와 같이 데이터를 쓰는 코드는 문제 없이 동작하는 것을 볼 수 있다.