---
layout : single
title : "STAGE9. Server Side Request Forgery"
categories: Security
tag: [dreamhack, webhacking, wargame]
sidebar:
    nav: "docs"
---

# 드림핵 웹 ServerSide : Server Side Request Forgery (SSRF)

-  [x] File Download Vulnerability 실습
-  [x] 함께 실습 : image-storage
-  [x] 혼자 실습 : file-download-1

## SSRF

웹 개발 언어는 HTTP 언어를 전송하는 라이브러리(PHP : php-curl / NodeJS : http / Python : urllib, requests)를 제공한다. 이러한 라이브러리는 HTTP 요청을 보낼 클라이언트 뿐 아니라, 서버와 서버 간 통신에도 사용된다. 일반적으로 다른 웹의 리소스(마이크로서비스 간 통신, 외부 API 호출, 외부 웹 리소스 다운)를 사용하기 위한 목적으로 통신한다. <br>

기존의 단일 서비스와 달리, 최근의 웹 서비스는 지원하는 기능이 증가함에 따라, 구성요소가 증가하여 관리 및 코드의 복잡도를 낮추기 위해 마이크로 서비스들로 웹 서비스를 구축한다. 이때, 각 마이크로 서비스는 주로 HTTP, GRPC 등을 사용해 API 통신을 한다. 이와 같은 통신 과정에서 요청 내에 이용자의 입력값이 포함되는 경우 개발자가 의도하지 않은 요청이 전송된 수 있다. SSRF는 웹 서비스의 요청을 변조하는 취약점으로, 브라우저가 변조된 초청을 보내는 CSRF와는 다르게, 웹 서비스의 권한으로 변조된 요청을 보낼 수 있다. <br>

\* 마이크로 서비스 : [link](https://ko.wikipedia.org/wiki/%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C%EC%84%9C%EB%B9%84%EC%8A%A4)

<img src="https://kr.object.ncloudstorage.com/dreamhack-content/page/f502e35c364d869abc43ded7609ab3843da840498ca8fc06b0341be798fe4b80.png"><br><br>

백오피스 서비스는 관리자 페이지라고도 불리며, 이용자의 계정을 정지시키거나, 삭제하는 등 관리자만 수행할 수 있는 기능들을 구현한 서비스이다. 이러한 서비스는 관리자만 이용할 수 있어야 하기 때문에 외부에서 접근 불가한 내부망에 위치한다. 웹 서비스는 의심스러운 행위를 탐지하고 실시간으로 대응하기 위해 백오피스의 기능을 실행할 수 있다. 만약 공격자가 SSRF 취약점을 통해 웹 서비스의 권한으로 요청을 보낼 수 있다면, 공격자는 외부에서 간접적으로 내부망 서비스를 이용할 수 있게 된다. 

### 이용자가 입력한 URL에 요청을 보내는 경우

### 웹 서비스의 요청 URL에 이용자의 입력값이 포함되는 경우

### 웹 서비스의 요청 Body에 이용자의 입력값이 포함되는 경우


<img src = "/images/wargame/15.png"><br>