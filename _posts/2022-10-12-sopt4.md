---
layout : single
title : "[TS] GET/POST API 만들기, JSON formating, 동적 HTML"
categories: sopt
tag: [nodejs(express), typescript]
sidebar:
    nav: "docs"
---

# 31기 IN SOPT 서버파트 2차 세미나 (2) - 도전/생각 과제

- [ ] [API 만들기](#get-post-api)
- [x] [JSON formating](#json-formating)
- [x] [dynamic HTML](#동적-html)

---

## GET, POST API

### GET

```typescript
// create post
router.post('/create', (req: Request, res: Response) => {
    const post_id = parseInt(req.body.post_id);
    const title = req.body.title;
    const content = req.body.content;
    const author = req.body.author;
    if (post_id && title && content && author) {
        const new_post = {post_id: post_id, title: title, content: content, author: author};
        blog_post.push(new_post);
        return res.redirect('read');
    }
});
```

### POST

```typescript
router.get("/read", (req: Request, res: Response) => {
    type blog ={
        [key : string]: object;
    }

    let blog : blog = {};
    
    // array 형식 출력 X -> 각 객체를 post1 : ~ post2 : ~ 로 출력하기
    for(let i=0; i<blog_post.length; i++) {
        blog['post'+(i+1)] = blog_post[i];
    }

    return res.status(200).json({
        status: 200,
        message: '블로그 조회 성공',
        data: blog
    });
});
```

## JSON formating

JSON (JavaScript Object Notation) : 값이나 객체를 나타내는 포맷

- JSON.stringify : 객체 -> JSON
- JSON.parse : JSON -> 객체

그러나 이때, JSON에 값을 넣는 거니까 JSON.stringify를 해서 넣어야지 ! 라고 생각하고 object와 같은 타입을 다음과 같이 JSON으로 변환 후 넣는다면,, 

```typescript
blog['post'+(i+1)] = JSON.stringify(blog_post[i]);
```

아래와 같이 개행문자가 모두 포함된다. 이는 사실 전송할 때 보다는, JSON 값을 받아올 때 많이 보게 될 모습이다.

<img src="/images/sopt/5.png">

개행문자 없이 예쁜 출력을 원한다면 JSON 데이터를 받아온 후 JSON.parse 를 꼭 써주어야 한다.

## 동적 HTML